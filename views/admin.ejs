<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <link rel='stylesheet' href='/admin-styles.css'>
  <!-- Bootstrap minified CSS -->
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
  <!-- Google Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Open+Sans|Roboto|Comfortaa' rel='stylesheet'>
  <title>---</title>
</head>

<body>
  <div class='signIn'>

  </div>
  <!-- Manage items modal -->
  <div class='modal fade' id='manageItems' tabindex='-1' role='dialog' aria-labelledby='Manage Items' aria-hidden='true'>
    <div class='modal-dialog' role='document'>
      <div class='modal-content'>
        <div class='modal-header'>
          <span id='manageItemsTitle'>Add new item</span>
          <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
          <span aria-hidden='true'>&times;</span>
        </button>
        </div>
        <div class='new-item'>
          <form id='itemsForm' action='/add' method='POST' autocomplete='off' id='itemsForm'>
            <div class='row'>
              <div class='col-lg-12'>
                <div class='form-group' style='padding-right: 0px;'>
                  <input type='text' class='form-control' id='name' name='name' required='true' placeholder='Item Name' maxlength='40'>
                </div>
              </div>
            </div>
            <div class='form-group'>
              <textarea rows='0' cols='80' id='body' name='body'></textarea>
            </div>
            <div class='row'>
              <div class='form-group col-lg-6 col-md-6'>
                <label for='type'>Category</label>
                <select class='form-control' id='category' name='category' required='true'>
                  <option disabled selected value> --Select-- </option>
                  <option>Analytics</option>
                  <option>Audio</option>
                  <option>Error Messages</option>
                  <option>Roster</option>
                  <option>Skills</option>
                  <option>Signing_In</option>
                  <option>SmartScore</option>
                  <option>Other</option>
                </select>
              </div>
              <div class='form-group col-lg-6 col-md-6'>
                <label for='type'>Type</label>
                <select class='form-control' id='type' name='type' required='true'>
                  <option disabled selected value> --Select-- </option>
                  <option>Template</option>
                  <option>Template-Verified</option>
                </select>
              </div>
              <div class='form-group'>
                <input type='hidden' class='form-control' id='id' name='id' required='true'>
                <input type='hidden' id='updatedDate' name='updatedDate' value='error'>
                <input type='hidden' id='addedByUser' name='addedByUser' value='<%= user.email %>'>
                <input type='hidden' id='ranking' name='ranking' value=0>
              </div>
            </div>
            <div class='form-group'>
              <input type='text' class='form-control' id='tags' name='tags' required='true' placeholder='Tags'>
            </div>
            <button type='submit' class='btn btn-primary' id='submitBtn'>Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- End manage items modal -->

  <!-- Confirm remove modal -->
  <div class='modal fade' id='confirmRemoveDialog' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>
    <div class='modal-dialog'>
      <div class='modal-content'>
        <div class='modal-header'>
          <h4>Are you sure you want to remove: <br>
            <b><span id='confirmRemoveName'>*error*</span></b>?
          </h4>
        </div>
        <div class='modal-footer' id='confirmRemoveModal'>
          <button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>
          <a class='btn btn-danger btn-ok' id='confirmRemoveBtn' onclick='remove(event)'>Delete</a>
        </div>
      </div>
    </div>
  </div>
  <!-- End modal -->

  <!-- Navbar -->
  <nav class='navbar navbar-default'>
    <div class="nav navbar-nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
          <img class="profile-img" src="<%= user.img %>" alt=""></a>
        <ul class="dropdown-menu">
          <li>
            <% if (user) { %>
              <li id='greeting'>Hello,
                <span id="userFirstName"><%= user.name %></span>!
              </li>
              <% } %>
          </li>
          <li class="divider"></li>
          <li><a id='' href='#manageItems' data-toggle='modal' data-target='#manageItems' onclick='setItemId()'>Add a template</a>
          </li>

          <li><a href="/items">User Console</a></li>
          <li class="divider"></li>
          <li id="logout"><button class="btn btn-default btn-sm" type="button" name="button">Logout</button></li>
        </ul>
      </li>
    </div>
  </nav>
  <!-- End navbar -->

  <!-- Spacing -->
  <div class='row space'>
    <div class='col-lg-3'></div>
    <div class='col-lg-6'>
      <div>
      </div>
    </div>
    <div class='col-lg-3'></div>
  </div>
  <!-- End spacing -->

  <!-- TODO: Create an array with what I want to display, loop and display through array -->

  <!-- Verified Items -->
  <div class='row space'>
    <div class='col-lg-1 col-md-1'>
    </div>
    <div class='col-lg-12 col-md-12'>
      <ul id='data-table' class='center'>

        <!-- title, filter (if by category then go into or if by tyle then go into )
      print title and all templates, then loop -->



        <% let categories = ['Analytics', 'Audio', 'Error Messages', 'Roster', 'Skills', 'Signing_In', 'SmartScore', 'Other']; %>

          <% let items = templates; %>

            <% for(let k = 0; k < categories.length; k++) { %>

              <h1><%- categories[k] %></h1>

              <% for(let i = 0; i < items.length; i++) { %>

                <% if (items[i].category == categories[k]) { %>
                  <li id='<%= items[i].id %>' class='item' tabindex='0'>
                    <h2 class='<%= items[i].category.toLowerCase() %>' id='itemName'><%= items[i].name %> <i class='fas fa-check' id='<%= items[i].type.toLowerCase() %>'></i></h2>
                    <div class='details'>
                      <h3 class='line'><span id='itemRanking' hidden><%=items[i].ranking %></span><%=items[i].id %> - <i id='itemUpdatedDate'><%= items[i].updatedDate %></i></h3>
                      <!-- TODO: add logic that shows if this is a users template -->
                      <% if (user.type == 'admin' || items[i].addedByUser == user.email) { %>
                        <div class='line' id='removeConfirm'>
                          <button class='btn line'><i class='far fa-trash-alt fa-lg' ></i></button>
                        </div>
                        <% } %>
                          <% if (user.type == 'admin' || items[i].addedByUser == user.email) { %>
                            <div class='line' id='edit'>
                              <button class='btn line'><i class='fas fa-pencil-alt fa-lg'></i></button>
                            </div>
                            <% } %>
                              <% if (user.type == 'admin') { %>
                                <div class='line' id='clearRank'>
                                  <button class='btn line'><i class='fas fa-ban fa-lg'></i></button>
                                </div>
                                <% } %>
                                  <div class='line' id='copyPortion'>
                                    <button class='btn line'><i class='fas fa-eye fa-lg'></i></button>
                                  </div>
                    </div>
                    <div class='<%= items[i].category.toLowerCase() %> blur' id='itemBody'>
                      <%- items[i].body %>
                    </div>
                    <div class='row'>
                      <div class='col-lg-9 col-md-9'>
                        <h3 class='tags' id='itemTags'><%= items[i].tags %></h3>
                        <h3 class='type' id='itemType'><b>Type: </b><%= items[i].type %></h3>
                        <h3 class='type' id='itemType'><b>Added by: </b><%= items[i].addedByUser %></h3>
                      </div>
                      <div class='col-lg-3 col-md-3'>
                        <h3 class='<%= items[i].category.toLowerCase() %>' id='itemCategory'><%= items[i].category %></h3>
                      </div>
                    </div>
                  </li>
                  <% } %>
                    <% } %>
                      <% } %>
      </ul>
    </div>
    <div class='col-lg-1'></div>
  </div>
  <!-- End Verified Items -->

  <!-- Logout -->
  <div class="row space">
    <div class="col-lg-3">
    </div>
    <div class="col-lg-6">
      <a href="/logout">Log out</a>
    </div>
    <div class="col-lg-3">
    </div>
  </div>
  <!-- End Logout -->


</body>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script src='https://cloud.tinymce.com/stable/tinymce.min.js?apiKey=q4w1ytxm4ft7tl8tg92mbys2kh30beuux061ovviw4oc4pqo'></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
<script defer src='https://use.fontawesome.com/releases/v5.0.6/js/all.js'></script>
<script src='admin-main.js'></script>

</html>